diff --git a/node_modules/@aries-framework/core/build/agent/MessageSender.js b/node_modules/@aries-framework/core/build/agent/MessageSender.js
index 821de2e..8a44df4 100644
--- a/node_modules/@aries-framework/core/build/agent/MessageSender.js
+++ b/node_modules/@aries-framework/core/build/agent/MessageSender.js
@@ -155,6 +155,7 @@ let MessageSender = class MessageSender {
                         service,
                         senderKey: connection.verkey,
                         returnRoute: shouldUseReturnRoute,
+                        connectionId: connection.id
                     });
                     return;
                 }
@@ -193,7 +194,7 @@ let MessageSender = class MessageSender {
         });
         throw new error_1.AriesFrameworkError(`Message is undeliverable to connection ${connection.id} (${connection.theirLabel})`);
     }
-    async sendMessageToService({ message, service, senderKey, returnRoute, }) {
+    async sendMessageToService({ message, service, senderKey, returnRoute, connectionId }) {
         if (this.outboundTransports.length === 0) {
             throw new error_1.AriesFrameworkError('Agent has no outbound transport!');
         }
@@ -209,6 +210,7 @@ let MessageSender = class MessageSender {
         }
         const outboundPackage = await this.packMessage({ message, keys, endpoint: service.serviceEndpoint });
         outboundPackage.endpoint = service.serviceEndpoint;
+        outboundPackage.connectionId = connectionId
         for (const transport of this.outboundTransports) {
             if (transport.supportedSchemes.includes(service.protocolScheme)) {
                 await transport.sendMessage(outboundPackage);
diff --git a/node_modules/@aries-framework/core/build/transport/WsOutboundTransport.js b/node_modules/@aries-framework/core/build/transport/WsOutboundTransport.js
index e32d14d..c26a0d2 100644
--- a/node_modules/@aries-framework/core/build/transport/WsOutboundTransport.js
+++ b/node_modules/@aries-framework/core/build/transport/WsOutboundTransport.js
@@ -5,6 +5,7 @@ const AgentConfig_1 = require("../agent/AgentConfig");
 const EventEmitter_1 = require("../agent/EventEmitter");
 const AriesFrameworkError_1 = require("../error/AriesFrameworkError");
 const TransportEventTypes_1 = require("./TransportEventTypes");
+const { Buffer } = require("../utils/buffer")
 class WsOutboundTransport {
     constructor() {
         this.transportTable = new Map();
